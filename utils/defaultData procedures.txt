    DELIMITER &&  
    CREATE PROCEDURE insertCampus (IN nombre varchar(255), IN dir1 varchar(255), IN ciudad varchar(255),
                                   IN provincia varchar(255), IN pais varchar(255))  
    BEGIN  
    
        insert into terceros (`nombre`) values (nombre); 
        SET @terId = LAST_INSERT_ID();


        insert into recintos (`idrecinto`) values (@terId);
        insert into direcciones (`linea1`, `ciudad`, `provincia`, `pais`) values (dir1, ciudad, provincia, pais);
        SET @dirId = LAST_INSERT_ID();
        insert into direcciones_terceros (`iddireccion`, `idtercero`) values (@dirId, @terId);

    END &&  
    DELIMITER ;  


    
    DELIMITER &&  
    CREATE PROCEDURE insertUser (IN idusuario INT, IN usuario varchar(255), IN contra varchar(255), IN tipo varchar(255))  
    BEGIN  
    
        insert into usuarios (`idusuario`, `usuario`,`contra`, `tipo`) values (idusuario, usuario, contra, tipo);

    END &&  
    DELIMITER ;  

    
    DELIMITER &&  
    CREATE PROCEDURE insertEmployee (IN nombre varchar(255), IN apellido varchar(255), IN matricula varchar(50), IN idrecinto int, IN cedula varchar(255), IN dir1 varchar(255), IN ciudad varchar(255), IN provincia varchar(255), IN pais varchar(255), OUT idter int)  
    BEGIN  
    
        insert into terceros (`nombre`) values (nombre); 
        SET @terId = LAST_INSERT_ID();
        SET idter = @terId;

        insert into personas (`idpersona`, `apellido`) values (@terId, apellido);
        insert into adicionales_personas (`idpersona`, `cedula`) values (@terId, cedula);
        
        insert into empleados (`idempleado`, `idrecinto`, `matricula`) values (@terId, idrecinto, matricula);

        insert into direcciones (`linea1`, `ciudad`, `provincia`, `pais`) values (dir1, ciudad, provincia, pais);
        SET @dirId = LAST_INSERT_ID();
        insert into direcciones_terceros (`iddireccion`, `idtercero`) values (@dirId, @terId);

    END &&  
    DELIMITER ;  

    
    DELIMITER &&  
    CREATE PROCEDURE insertCareer (IN nombre varchar(255), IN tipo varchar(255))  
    BEGIN  

        insert into terceros (`nombre`) values (nombre); 
        SET @terId = LAST_INSERT_ID();

        insert into carreras (`idcarrera`, `tipo`, `estado`) values (@terId, tipo, '1');

    END &&  
    DELIMITER ;  


    



    DELIMITER &&  
        CREATE PROCEDURE insertStudent (IN nombre varchar(255), IN apellido varchar(255), IN matricula varchar(50), IN carrera int, IN idrecinto int, IN cedula varchar(255), IN dir1 varchar(255), IN ciudad varchar(255), IN provincia varchar(255), IN pais varchar(255), OUT idter int)  
        BEGIN  
        
            insert into terceros (`nombre`) values (nombre); 
            SET @terId = LAST_INSERT_ID();
            SET idter = @terId;

            insert into personas (`idpersona`, `apellido`) values (@terId, apellido);
            insert into adicionales_personas (`idpersona`, `cedula`) values (@terId, cedula);
            
            insert into estudiantes (`idestudiante`, `idcarrera`, `idrecinto`, `matricula`) values (@terId, carrera, idrecinto, matricula);

            insert into adicionales_estudiantes(`idestudiante`) values (@terId);

            insert into direcciones (`linea1`, `ciudad`, `provincia`, `pais`) values (dir1, ciudad, provincia, pais);
            SET @dirId = LAST_INSERT_ID();
            insert into direcciones_terceros (`iddireccion`, `idtercero`) values (@dirId, @terId);


        END &&  
    DELIMITER ;  

    DELIMITER &&  
        CREATE PROCEDURE insertPhone (IN telefono varchar(255), IN tipotel varchar(255), IN idtercero int)  
        BEGIN  
        

            insert into telefonos (`telefono`) values (telefono);
            SET @telId = LAST_INSERT_ID();

            insert into telefonos_terceros (`idtelefono`, `idtercero`, `tipo`) values (@telId, idtercero, tipotel);
            

        END &&  
    DELIMITER ;  



DELIMITER &&  
CREATE PROCEDURE insertRequestData (IN nombre varchar(255), IN tipo varchar(255), IN telefono varchar(255), IN direccion varchar(255), IN encargado varchar(255), IN idestudiante int, IN numrecibo varchar(255), IN firma TINYINT, IN estado varchar(255))  
BEGIN  

    insert into terceros (`nombre`) values (nombre); 
    SET @terId = LAST_INSERT_ID();

    insert into empresas (`idempresa`, `tipo`) values (@terId, tipo);


    insert into terceros (`nombre`) values (encargado); 
    SET @terIdRep = LAST_INSERT_ID();
    insert into personas (`idpersona`) values (@terIdRep); 


    insert into representantes_empresas (`idrepresentante`, `idempresa`) values (@terIdRep, @terId);

    insert into telefonos (`telefono`) values (telefono);
    SET @telId = LAST_INSERT_ID();

    insert into telefonos_terceros(`idtelefono`, `idtercero`) values (@telId, @terId);


    insert into direcciones(`linea1`) values (direccion);
    SET @dirId = LAST_INSERT_ID();
    insert into direcciones_terceros(`iddireccion`, `idtercero`) values (@dirId, @terId);


    insert into solicitudes(`idestudiante`, `idempresa`, `numrecibo`, `firma`, `estado`) values (idestudiante, @terId, numrecibo, firma, estado);


END &&  
DELIMITER ;  





DELIMITER &&  
CREATE PROCEDURE updateRequestData (IN nombreEmpresa varchar(255), IN tipoEmpresa varchar(255),
                IN telefonoEmpresa varchar(255), IN direccionEmpresa varchar(255), IN encargadoEmpresa varchar(255), 
                IN numrecibo varchar(255), IN estado varchar(255),
                IN idsolicitud int)  
BEGIN  

    set @idempresa = (select idempresa from solicitudes where idsolicitud = idsolicitud);

    UPDATE `terceros` SET `nombre` = nombreEmpresa WHERE idtercero = @idempresa;
    UPDATE `empresas` SET `tipo` = tipoEmpresa WHERE idempresa = @idempresa;

    set @idrep = (select idrepresentante from representantes_empresas where idempresa = @idempresa);
    UPDATE `terceros` SET `nombre` = encargadoEmpresa WHERE idtercero = @idrep;

    set @idtel = (select idtelefono from telefonos_terceros where idtercero = @idempresa);
    UPDATE `telefonos` SET `telefono` = telefonoEmpresa WHERE idtelefono = @idtel;


    
    set @iddir = (select iddireccion from direcciones_terceros where idtercero = @idempresa);
    UPDATE `direcciones` SET `linea1` = direccionEmpresa WHERE iddireccion = @iddir;

    
    UPDATE `solicitudes` SET `numrecibo` = numrecibo,`estado` = estado WHERE idsolicitud = idsolicitud;

END &&  
DELIMITER ;  
